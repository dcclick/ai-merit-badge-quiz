import React, { useState } from 'react';
import { Check, X, RotateCcw, Award } from 'lucide-react';

const AIQuiz = () => {
  const [quizAnswers, setQuizAnswers] = useState({});
  const [showQuizResults, setShowQuizResults] = useState(false);

  const quizQuestions = [
    {
      id: 1,
      question: "Which type of AI exists today and is in your smartphone?",
      options: ["Artificial General Intelligence (AGI)", "Narrow AI (Weak AI)", "Artificial Superintelligence (ASI)", "Strong AI"],
      correct: 1,
      explanation: "Narrow AI (Weak AI) is designed for specific tasks like voice recognition or recommendations. All AI we use today is Narrow AI - it excels at one thing but can't transfer that knowledge to other tasks."
    },
    {
      id: 2,
      question: "What is the main difference between Narrow AI and Artificial General Intelligence (AGI)?",
      options: ["AGI is faster than Narrow AI", "Narrow AI can only do one task, AGI could do any intellectual task humans can", "AGI uses more electricity", "Narrow AI is newer technology"],
      correct: 1,
      explanation: "Narrow AI excels at specific tasks (like chess or language translation). AGI would be able to learn and apply knowledge across any domain like humans do - but AGI doesn't exist yet!"
    },
    {
      id: 3,
      question: "In 1997, IBM's Deep Blue defeated world chess champion Garry Kasparov. What type of AI was Deep Blue?",
      options: ["General AI, because it was really smart", "Narrow AI, because it could only play chess", "Superintelligence, because it beat a human", "Weak AI, because it couldn't beat everyone"],
      correct: 1,
      explanation: "Despite beating the world champion, Deep Blue was Narrow AI - it could ONLY play chess. It couldn't have a conversation, drive a car, or do anything else. Being excellent at one task doesn't make it General AI."
    },
    {
      id: 4,
      question: "An AI hiring system trained on 20 years of past company data ranks male applicants higher than female applicants with identical qualifications. What ethical issue does this demonstrate?",
      options: ["Privacy violation", "Algorithmic bias", "Lack of transparency", "Energy consumption"],
      correct: 1,
      explanation: "This is algorithmic bias - the AI learned from historical data that reflected past gender discrimination. The AI isn't 'sexist' itself, but it learned and amplified patterns from biased training data."
    },
    {
      id: 5,
      question: "Which scenario describes Artificial Superintelligence (ASI)?",
      options: ["A chatbot that can answer questions in multiple languages", "An AI that surpasses human intelligence in all areas - creativity, problem-solving, social skills, and more", "A computer that can beat humans at any game", "An AI assistant that helps doctors diagnose diseases"],
      correct: 1,
      explanation: "ASI would exceed human intelligence in EVERY domain - not just computation but creativity, wisdom, social skills, and emotional intelligence. This is purely theoretical and doesn't exist. Some researchers debate if it's even possible!"
    },
    {
      id: 6,
      question: "Why is 'transparency' important in AI systems used for critical decisions (like medical diagnosis or loan approvals)?",
      options: ["So the AI uses less energy", "So people can understand how and why the AI made its decision", "So the AI works faster", "So the AI can be smaller"],
      correct: 1,
      explanation: "Transparency (also called 'explainability') means understanding how AI reaches its conclusions. If an AI denies your loan or misdiagnoses an illness, you deserve to know why - not just get a mysterious 'black box' decision."
    },
    {
      id: 7,
      question: "Which of these represents the current state of AI development?",
      options: ["We have achieved AGI, but not ASI", "We only have Narrow AI; AGI and ASI don't exist yet", "We have ASI in research labs but not in products", "We have AGI in some countries but not others"],
      correct: 1,
      explanation: "All AI in use today - from ChatGPT to self-driving cars to medical diagnosis systems - is Narrow AI designed for specific tasks. AGI (general intelligence) and ASI (superintelligence) remain theoretical."
    },
    {
      id: 8,
      question: "If an AI system causes harm (like a self-driving car accident or a biased hiring decision), who should be held accountable?",
      options: ["The AI itself - it made the decision", "No one - accidents happen", "The developers, company, and/or users depending on the situation", "Only the people who used the AI"],
      correct: 2,
      explanation: "This is the accountability challenge! AI can't be 'blamed' - it's a tool. Responsibility might fall on developers (poor design), companies (insufficient testing), or users (misuse). This is an active area of legal and ethical debate."
    }
  ];

  const handleQuizAnswer = (questionId, answerIndex) => {
    setQuizAnswers({ ...quizAnswers, [questionId]: answerIndex });
  };

  const calculateScore = () => {
    let correct = 0;
    quizQuestions.forEach(q => {
      if (quizAnswers[q.id] === q.correct) correct++;
    });
    return correct;
  };

  const resetQuiz = () => {
    setQuizAnswers({});
    setShowQuizResults(false);
  };

  const getScoreMessage = (score) => {
    const percentage = (score / quizQuestions.length) * 100;
    if (percentage === 100) return "Perfect Score! You're an AI Expert! üåü";
    if (percentage >= 75) return "Excellent Work! You know your AI! üéâ";
    if (percentage >= 50) return "Good Job! You're learning! üëç";
    return "Keep Learning! AI is complex! üí™";
  };

  const allQuestionsAnswered = Object.keys(quizAnswers).length === quizQuestions.length;
  const score = calculateScore();

  return (
    <div className="min-h-screen bg-gradient-to-b from-blue-50 to-purple-50 p-4">
      <div className="max-w-4xl mx-auto">
        <div className="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-8 rounded-xl shadow-2xl mb-8">
          <div className="flex items-center justify-center mb-4">
            <Award size={48} className="mr-4" />
            <h1 className="text-4xl font-bold">AI Merit Badge Quiz</h1>
          </div>
          <p className="text-center text-xl opacity-90">Test Your AI Knowledge!</p>
          <p className="text-center text-sm mt-2 opacity-75">8 Questions ‚Ä¢ No Time Limit ‚Ä¢ Learn as You Go</p>
        </div>

        {!showQuizResults && (
          <div className="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 className="text-xl font-bold text-gray-800 mb-3">üìã Instructions</h2>
            <ul className="space-y-2 text-gray-700">
              <li className="flex items-start gap-2">
                <span className="text-blue-600 font-bold">1.</span>
                <span>Read each question carefully</span>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-blue-600 font-bold">2.</span>
                <span>Click on your answer choice</span>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-blue-600 font-bold">3.</span>
                <span>Answer all 8 questions before submitting</span>
              </li>
              <li className="flex items-start gap-2">
                <span className="text-blue-600 font-bold">4.</span>
                <span>Review the explanations to learn more!</span>
              </li>
            </ul>
          </div>
        )}

        {!showQuizResults && (
          <div className="bg-white p-4 rounded-lg shadow-md mb-6">
            <div className="flex items-center justify-between mb-2">
              <span className="text-sm font-semibold text-gray-700">Progress</span>
              <span className="text-sm font-semibold text-blue-600">
                {Object.keys(quizAnswers).length} / {quizQuestions.length}
              </span>
            </div>
            <div className="w-full bg-gray-200 rounded-full h-3">
              <div 
                className="bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-300"
                style={{ width: `${(Object.keys(quizAnswers).length / quizQuestions.length) * 100}%` }}
              />
            </div>
          </div>
        )}

        <div className="space-y-6 mb-8">
          {quizQuestions.map((q, index) => (
            <div key={q.id} className="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow">
              <div className="flex items-start gap-3 mb-4">
                <div className="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">
                  {index + 1}
                </div>
                <p className="font-bold text-lg text-gray-800 flex-1">
                  {q.question}
                </p>
              </div>
              
              <div className="space-y-3">
                {q.options.map((option, optionIndex) => (
                  <button
                    key={optionIndex}
                    onClick={() => !showQuizResults && handleQuizAnswer(q.id, optionIndex)}
                    disabled={showQuizResults}
                    className={`w-full text-left p-4 rounded-lg border-2 transition-all ${
                      quizAnswers[q.id] === optionIndex
                        ? showQuizResults
                          ? optionIndex === q.correct
                            ? 'bg-green-100 border-green-500 shadow-md'
                            : 'bg-red-100 border-red-500 shadow-md'
                          : 'bg-blue-100 border-blue-500 shadow-md'
                        : showQuizResults && optionIndex === q.correct
                        ? 'bg-green-50 border-green-400'
                        : 'bg-white border-gray-300 hover:border-blue-400 hover:bg-blue-50'
                    } ${showQuizResults ? 'cursor-default' : 'cursor-pointer'}`}
                  >
                    <div className="flex items-center gap-3">
                      {showQuizResults && (
                        <div className="flex-shrink-0">
                          {optionIndex === q.correct && (
                            <Check className="text-green-600" size={24} strokeWidth={3} />
                          )}
                          {quizAnswers[q.id] === optionIndex && optionIndex !== q.correct && (
                            <X className="text-red-600" size={24} strokeWidth={3} />
                          )}
                        </div>
                      )}
                      <span className={quizAnswers[q.id] === optionIndex ? 'font-semibold' : ''}>
                        {option}
                      </span>
                    </div>
                  </button>
                ))}
              </div>
              
              {showQuizResults && (
                <div className="mt-4 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                  <p className="text-sm font-bold text-blue-900 mb-2">üí° Explanation:</p>
                  <p className="text-sm text-gray-700 leading-relaxed">{q.explanation}</p>
                </div>
              )}
            </div>
          ))}
        </div>

        <div className="bg-white p-8 rounded-xl shadow-lg sticky bottom-4">
          {!showQuizResults ? (
            <div className="text-center">
              <button
                onClick={() => setShowQuizResults(true)}
                disabled={!allQuestionsAnswered}
                className={`px-8 py-4 rounded-lg text-lg font-bold transition-all transform ${
                  allQuestionsAnswered
                    ? 'bg-gradient-to-r from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700 hover:scale-105 shadow-lg hover:shadow-xl'
                    : 'bg-gray-300 text-gray-600 cursor-not-allowed'
                }`}
              >
                {allQuestionsAnswered ? 'üéØ Submit Quiz' : `üìù Answer All Questions (${Object.keys(quizAnswers).length}/${quizQuestions.length})`}
              </button>
              {!allQuestionsAnswered && (
                <p className="text-sm text-gray-500 mt-3">
                  Please answer all questions before submitting
                </p>
              )}
            </div>
          ) : (
            <div className="space-y-6">
              <div className="bg-gradient-to-r from-blue-100 to-purple-100 p-6 rounded-lg border-2 border-blue-300">
                <div className="text-center">
                  <p className="text-sm font-semibold text-gray-600 mb-2">Your Score</p>
                  <div className="flex items-center justify-center gap-4 mb-3">
                    <div className="text-6xl font-bold text-blue-600">{score}</div>
                    <div className="text-4xl text-gray-400">/</div>
                    <div className="text-4xl font-bold text-gray-600">{quizQuestions.length}</div>
                  </div>
                  <div className="text-2xl font-bold text-purple-600 mb-2">
                    {Math.round((score / quizQuestions.length) * 100)}%
                  </div>
                  <p className="text-lg font-semibold text-gray-700">
                    {getScoreMessage(score)}
                  </p>
                </div>
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div className="bg-green-50 p-4 rounded-lg border-2 border-green-200 text-center">
                  <div className="flex items-center justify-center gap-2 mb-2">
                    <Check className="text-green-600" size={24} />
                    <p className="font-bold text-green-800">Correct</p>
                  </div>
                  <p className="text-3xl font-bold text-green-600">{score}</p>
                </div>
                <div className="bg-red-50 p-4 rounded-lg border-2 border-red-200 text-center">
                  <div className="flex items-center justify-center gap-2 mb-2">
                    <X className="text-red-600" size={24} />
                    <p className="font-bold text-red-800">Incorrect</p>
                  </div>
                  <p className="text-3xl font-bold text-red-600">{quizQuestions.length - score}</p>
                </div>
              </div>

              <div className="flex gap-4">
                <button
                  onClick={resetQuiz}
                  className="flex-1 bg-gradient-to-r from-gray-500 to-gray-600 text-white px-6 py-4 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all flex items-center justify-center gap-2 font-bold shadow-md hover:shadow-lg"
                >
                  <RotateCcw size={20} />
                  Retake Quiz
                </button>
                <button
                  onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
                  className="flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-4 rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all font-bold shadow-md hover:shadow-lg"
                >
                  üìö Review Answers
                </button>
              </div>

              <div className="bg-yellow-50 p-4 rounded-lg border-2 border-yellow-200">
                <p className="font-bold text-yellow-800 mb-2">üí° Learning Tips:</p>
                <ul className="text-sm text-gray-700 space-y-1">
                  <li>‚Ä¢ Review the explanations for questions you missed</li>
                  <li>‚Ä¢ All current AI is Narrow AI - remember this key concept!</li>
                  <li>‚Ä¢ Ethics (bias, privacy, transparency) are crucial in AI development</li>
                  <li>‚Ä¢ Retake the quiz to reinforce your learning</li>
                </ul>
              </div>
            </div>
          )}
        </div>

        <div className="text-center mt-8 text-gray-600 text-sm">
          <p>üéñÔ∏è AI Merit Badge - Session 1 Pre-Assessment</p>
          <p className="mt-2">Ready to learn more? Let's dive into AI history and ethics!</p>
        </div>
      </div>
    </div>
  );
};

export default AIQuiz;